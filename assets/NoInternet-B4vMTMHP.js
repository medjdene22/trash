import{d as I,r as l,E as w,D as C,j as e,c as u,H as M,U as R,k as P,z as S,b as p,l as z,W as O}from"./index-Bf9YSDzw.js";import{u as E,R as T,S as W}from"./spin-loading-B5_4YkMJ.js";import{B,H as _}from"./Badge-DUqg7dyr.js";import{I as q}from"./image-Jk-t-vKZ.js";import{C as A,a as U,B as y}from"./button-wLXwjMlM.js";import{C as H,c as J}from"./card-DgkIsm6E.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],N=I("refresh-cw",G);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],D=I("wifi-off",V);function F({title:s,titleId:t,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Z=l.forwardRef(F);function K({title:s,titleId:t,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const Q=l.forwardRef(K);function X({title:s,titleId:t,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const Y=l.forwardRef(X),ee="https://apin.fibladi.com/fibladi",pe=(s,t,n,a)=>E({enabled:!!s,staleTime:6e5,queryKey:["trend",{time:s,cat:t,rand:!!n}],queryFn:async()=>{const o=await fetch(`${ee}/trending/${s}?cat=${t}`);if(!o.ok)throw new Error("faild to fetch posts");const{results:i}=await o.json(),d=a?i.slice(0,a).map(c=>w(c)):i.map(c=>w(c));return{posts:n?C(d):d}}}),ge=({className:s,itemClass:t,categories:n,vr:a})=>e.jsx("div",{className:u("category-badge-list flex flex-wrap gap-x-2 gap-y-1",s),children:n.map((r,o)=>{const i=a==="fr"?`/news/fr/${r.handle}`:`/news/${r.handle}`;return e.jsx(B,{className:t,href:i,color:"lime",children:r.name},o)})}),te=({className:s,handle:t,vr:n})=>{const[a,r]=l.useState(ne(t)),o=`https://ana.fibladi.com/fr/ExtFavorites/type/News?url=${t}`,i=()=>{a?ae(t):(window.open(o,"_blank"),se(t)),r(!a)};return e.jsx("button",{className:u("relative flex size-8 items-center justify-center rounded-full bg-neutral-50 transition-colors duration-300 hover:bg-neutral-100 dark:bg-white/10 dark:hover:bg-white/20  cursor-pointer",s),title:"Save to reading list",onClick:i,type:"button",children:e.jsx(M,{icon:R,size:18,strokeWidth:1.75,fill:a?"currentColor":"none"})},t)};function se(s){const t=JSON.parse(localStorage.getItem("savedPosts")||"[]");t.includes(s)||(t.push(s),localStorage.setItem("savedPosts",JSON.stringify(t)))}function ae(s){const n=JSON.parse(localStorage.getItem("savedPosts")||"[]").filter(a=>a!==s);localStorage.setItem("savedPosts",JSON.stringify(n))}function ne(s){return JSON.parse(localStorage.getItem("savedPosts")||"[]").includes(s)}const we=({className:s,bookmarkClass:t,handle:n,vr:a})=>e.jsx("div",{className:u("post-card-save-btn flex items-center gap-x-2 text-xs",s),children:e.jsx(te,{className:t,handle:n,vr:a})}),ve=({videoUrl:s,isHover:t,setIsHover:n,handle:a,vr:r})=>{const[o,i]=l.useState(!1),[d,m]=l.useState(!0),[c,f]=l.useState(!1),[g,x]=l.useState(!1);let h=null;const v=l.useRef(null),b=r==="fr"?"/news/fr/$postId":"/news/$postId",j=decodeURIComponent(a),$=P(),L=S();return l.useEffect(()=>{var k;t&&(x(!0),(k=v.current)==null||k.seekTo(0,"seconds"))},[t]),l.useEffect(()=>()=>{h&&clearTimeout(h)},[h]),e.jsxs("div",{className:u("absolute inset-0 z-20",t?"opacity-100":"opacity-0"),children:[g&&e.jsx(T,{ref:v,url:s,muted:o,playing:t,style:{opacity:c?1:0},className:"absolute inset-0 bg-neutral-900 transition-opacity",width:"100%",height:"100%",onStart:()=>{f(!0),h&&clearTimeout(h),h=setTimeout(()=>{m(!1)},2500)}}),e.jsx(p,{onClick:()=>{n(),decodeURIComponent($.pathname)===b.replace("$postId",j)&&window.scrollTo({top:0,behavior:"smooth"})},to:b,...!L&&{target:"_blank"},params:{postId:j},className:u("absolute inset-0 flex items-center justify-center",c?"opacity-0":"opacity-100"),children:e.jsx(W,{})}),c&&e.jsx("div",{className:u("absolute end-2 bottom-2 flex h-6 items-center justify-center rounded-full bg-black/70 text-sm text-white transition-transform cursor-pointer m-2"),onClick:n,children:e.jsx(Z,{className:"size-8 z-40"})}),c&&e.jsx("div",{className:u("absolute start-2 bottom-2 flex h-6 items-center justify-center rounded-full bg-black/70 text-sm text-white transition-transform cursor-pointer m-2",d?"ps-1.5 pe-2":"w-6 hover:scale-125"),onClick:()=>i(!o),children:o?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"size-5"}),d&&e.jsx("span",{className:"ms-1 inline-block ",children:"Click here to unmute"})]}):e.jsx(Q,{className:"size-5"})})]})};function oe({className:s,level:t=2,dimHeading:n,children:a,...r}){const o=`h${t}`;return e.jsxs(o,{...r,className:u(s,"text-2xl font-semibold tracking-tight text-pretty text-neutral-950 sm:text-2xl dark:text-white"),children:[a,n&&". ",n&&e.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:n})]})}function re({className:s,level:t=3,...n}){const a=`h${t}`;return e.jsx(a,{...n,className:u(s,"text-lg font-normal text-neutral-500 lg:text-xl dark:text-neutral-400")})}function le({className:s,level:t=1,subHeading:n,children:a,isCenter:r,...o}){return e.jsxs("div",{className:u("relative",s??"mb-6",r&&"mx-auto w-full text-center text-pretty"),children:[e.jsx(oe,{level:t,...o,children:a}),n&&e.jsx(re,{className:u("mt-3.5 max-w-3xl",r&&"mx-auto"),children:n})]})}const ie=({className:s,post:t,vr:n})=>{const{title:a,handle:r,featuredImage:o,id:i}=t,d=n==="fr"?"/news/fr/$postId":"/news/$postId",m=decodeURIComponent(r),c=P(),f=S();return e.jsx("div",{className:u(`nc-Card17Podcast relative flex items-center justify-between space-x-5 rounded-full bg-neutral-100 p-2.5 transition-shadow shadow-lg dark:bg-neutral-800/30 ${s}`),children:e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(p,{"aria-label":a,to:`${d}`,params:{postId:m},search:{id:i},...!f&&{target:"_blank"},onClick:()=>{c.pathname===`${d}${m}`&&window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx("div",{className:"relative size-14 shrink-0 rounded-full shadow-lg sm:size-18",children:e.jsx(q,{sizes:"(max-width: 1024px) 100vw, 50vw",className:"rounded-full object-cover",src:o,fill:!0,alt:a})})}),e.jsx("div",{className:"flex grow flex-col",children:e.jsx("h2",{className:"block font-medium sm:text-base/snug sm:font-semibold",children:e.jsx(p,{"aria-label":a,to:`${d}`,params:{postId:m},search:{id:i},onClick:()=>{c.pathname===`${d}${m}`&&window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx("span",{className:"line-clamp-2",dangerouslySetInnerHTML:{__html:a}})})})})]})})},be=({hedding:s="LES PLUS POPULAIRES CETTE SEMAINE",posts:t,full:n=!1,vr:a,loading:r})=>{const o=a==="fr"?"/news/fr/$postId":"/news/$postId";return r?e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-6 w-48 rounded bg-gray-300"}),Array.from({length:8}).map((i,d)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-300"}),e.jsxs("div",{className:"flex-1 space-y-1 mt-4",children:[e.jsx("div",{className:"h-4 w-full rounded bg-gray-200"}),e.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-200"})]})]},d))]})}):e.jsx("div",{className:u("w-full space-y-7 ",!n&&"lg:w-2/5 lg:ps-10  xl:w-1/3 xl:ps-0"),children:e.jsxs("div",{children:[e.jsx(le,{level:2,children:e.jsxs(p,{"aria-label":s,to:o,params:{postId:"trending-7days"},className:"flex items-center space-x-4  ",children:[a!=="fr"&&e.jsx("span",{}),s," ",a==="fr"?e.jsx(A,{size:19,strokeWidth:3,className:"mt-1 mx-1"}):e.jsx(U,{size:19,strokeWidth:3,className:"mt-1 mx-1"})," "]})}),e.jsx("div",{className:"flex flex-col space-y-6 sm:col-span-6 lg:col-span-2",children:t.map((i,d)=>e.jsx(ie,{post:i,vr:a},i.id))})]})})},ce="https://apin.fibladi.com/fibladi",je=(s,t,n)=>E({enabled:!!s,staleTime:n?6e4:26e4,queryKey:["last",{lang:s,page:t,rand:!!n}],queryFn:async()=>{const r=await fetch(`${ce}/lastnews?lang=${s}&p=${t}`);if(!r.ok)throw new Error("faild to fetch posts");const{results:o,total:i}=await r.json(),d=o.map(c=>w(c));return{posts:n?C(d):d,total:i}}});function ke(){const[s,t]=l.useState(navigator.onLine);return l.useEffect(()=>{const a=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",a),window.addEventListener("offline",r),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",r)}},[]),{isOnline:s,checkConnection:async()=>{try{const a=await fetch("https://www.google.com/favicon.ico",{mode:"no-cors",cache:"no-cache"});return t(!0),!0}catch{return t(!1),!1}}}}const ye=({onRetry:s,showRetryButton:t=!0,title:n="No Internet Connection",message:a="Please check your internet connection to continue reading the latest news.",checkConnection:r,isFr:o})=>{const[i,d]=l.useState(!1),m=z(),c={title:o?"Pas de connexion Internet":"لا يوجد اتصال بالإنترنت",message:o?"Veuillez vérifier votre connexion Internet pour continuer à lire les dernières actualités.":"يرجى التحقق من اتصالك بالإنترنت لمتابعة قراءة أحدث الأخبار.",tryAgain:o?"Réessayer":"حاول مرة أخرى",goHome:o?"Aller à l'accueil":"العودة للصفحة الرئيسية",checking:o?"Vérification de la connexion...":"جارٍ التحقق من الاتصال...",autoRestore:o?"La connexion sera rétablie automatiquement lorsqu'elle sera disponible":"سيتم استعادة الاتصال تلقائيًا عند توفره"},f=async()=>{d(!0);try{r?await r()&&s&&s():s&&s()}finally{setTimeout(()=>d(!1),1e3)}},g=()=>{m({to:o?"/news/fr":"/news"})};return l.useEffect(()=>{let x;return x=setInterval(()=>{f()},1e4),()=>clearInterval(x)},[]),e.jsx("div",{className:" z-40 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsx(H,{className:"mx-4 w-full max-w-md border-offline/20 bg-offline-accent/5",children:e.jsxs(J,{className:"flex flex-col items-center space-y-6 p-8 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"rounded-full bg-lime-200 p-6",children:e.jsx(D,{className:"h-12 w-12 text-offline animate-pulse"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 rounded-full bg-black/80 p-2",children:e.jsx(O,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:c.title}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:c.message})]}),t&&e.jsx(y,{onClick:f,disabled:i,variant:"outline",size:"lg",className:"w-full border-offline/30 text-offline hover:bg-lime-600 hover:text-white cursor-pointer",children:i?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),c.checking]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),c.tryAgain]})}),e.jsxs(y,{onClick:g,disabled:i,variant:"outline",size:"lg",className:"w-full border-offline/30 text-offline hover:bg-lime-600 hover:text-white cursor-pointer -mt-4",children:[e.jsx(_,{className:"mr-2 h-4 w-4 "}),c.goHome]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.autoRestore," "]})]})})})};export{ge as C,le as H,ve as M,ye as N,we as P,be as W,pe as a,je as b,oe as c,ke as u};
//# sourceMappingURL=NoInternet-B4vMTMHP.js.map
