import{D as c,E as u,m as f,n as p,j as e,e as h,r as x,u as b}from"./index-Bazt0cBE.js";import{c as j,H as w}from"./NoInternet-DpxRTM5E.js";import{S as g,M as N}from"./SectionSliderPosts-CC8oue2V.js";import{u as v,a as k}from"./getAds-BknYv3UM.js";import{C as y,a as $,I as d}from"./image-GMA0gPG2.js";const P="https://betaapin.fibladi.com/fibladi",F=(t,r="1")=>j({enabled:!!t,staleTime:6e5,queryKey:["top",{cat:t,page:r}],queryFn:async()=>{const s=await fetch(`${P}/bestnews/${t}?p=${r}`);if(!s.ok)throw new Error("faild to fetch posts");const{results:l,total:i}=await s.json();return{posts:c([l[0],...c(l.slice(1,10))].slice(0,4)).map(o=>u(o,!0)),total:i}}}),q=({vr:t,categorySlug:r})=>{const a=t==="fr"?f.get(r):p.get(r),{data:s,isLoading:l}=v(a==null?void 0:a.code,"1",!0),i=(s==null?void 0:s.posts)??[],n=t==="fr"?"/news/fr/$postId":"/news/$postId";return l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-300 h-7 w-1/2 rounded"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-8",children:[1,2,3,4].map((m,o)=>e.jsxs("div",{children:[e.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden ",children:e.jsx("div",{className:"bg-gray-300 h-32 sm:h-44 w-full"})},o),e.jsxs("div",{className:"py-4 space-y-2",children:[e.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"}),e.jsx("div",{className:"bg-gray-300 h-5 w-5/6 rounded"})]})]}))})]}):e.jsxs("div",{className:"relative mb-0 py-5",children:[e.jsx(w,{level:1,className:"mb-3",children:e.jsxs(h,{to:n,params:{postId:r},className:"flex items-center space-x-4 ",children:[a==null?void 0:a.name," ",t==="fr"?e.jsx(y,{size:19,strokeWidth:3,className:"mt-1"}):e.jsx($,{size:19,strokeWidth:3,className:"mt-1"})]})}),e.jsx(g,{posts:i,perView:4,showViewAll:!0,viewAllLinkHref:t==="fr"?`/news/fr/${r}`:`/news/${r}`,vr:t})]})};function A(){const{data:t,isLoading:r}=k(8),a=b();return r||!(t!=null&&t.length)?null:e.jsx(N,{isFr:a,data:t,renderItem:s=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("div",{className:"relative aspect-8/6 overflow-hidden rounded-2xl",children:s.link?e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"group block h-full w-full",children:e.jsx(d,{src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},altReal:s.title,className:" w-full h-full object-cover border border-neutral-300 transition-[filter] duration-300 group-hover:brightness-75",fill:!0})}):e.jsx(d,{src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},altReal:s.title,className:"w-full h-full object-cover border border-neutral-300",fill:!0})}),s.link?e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("p",{className:"text-center text-base  font-semibold text-neutral-800 dark:text-neutral-200 line-clamp-2",children:s.title})}):e.jsx("p",{className:"text-center text-base  font-semibold text-neutral-800 dark:text-neutral-200 line-clamp-2",children:s.title})]},s.id),itemPerRow:4})}const E=x.memo(A);export{E as A,q as L,F as u};
