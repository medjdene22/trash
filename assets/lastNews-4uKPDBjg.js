import{j as e,a as u,e as M,r as c,l as k,S as P,u as $,T as S,V as C}from"./index-BcWs6MQv.js";import{f as T,u as _,L as R}from"./getAds-qxFKUv3-.js";import{d as Y,S as D,R as B,a as F,_ as E,W as H,b as I}from"./NoInternet-83zvyH94.js";import{a as W,C as z,b as q,I as J}from"./image-BL1-3MSE.js";function K({className:s,...t}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:u("mx-auto flex w-full justify-center",s),...t})}function O({className:s,...t}){return e.jsx("ul",{"data-slot":"pagination-content",className:u("flex flex-row items-center gap-1",s),...t})}function v({...s}){return e.jsx("li",{"data-slot":"pagination-item",...s})}function L({className:s,isActive:t,size:n="icon",...i}){return e.jsx(M,{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:u(q({variant:t?"outline":"secondary",size:n}),s,t?"text-white bg-lime-600 hover:bg-lime-500 hover:text-white":"hover:bg-lime-500 hover:text-white"),...i})}function Q({className:s,isFr:t,...n}){return e.jsx(L,{"aria-label":"Go to previous page",size:"default",className:u("gap-1 px-2.5 sm:pl-2.5",s),...n,children:t?e.jsx(W,{className:"size-4",strokeWidth:3}):e.jsx(z,{className:"size-4",strokeWidth:3})})}function U({className:s,isFr:t,...n}){return e.jsxs(L,{"aria-label":"Go to next page",size:"default",className:u("gap-1 px-2.5 sm:pr-2.5",s),...n,children:[t?e.jsx(z,{className:"size-4",strokeWidth:3}):e.jsx(W,{className:"size-4",strokeWidth:3})," "]})}const A=({paginationLinkBase:s,current:t,total:n,isFr:i=!0})=>{const l=X(Number(t),n);return e.jsx(K,{className:"mt-12",children:e.jsxs(O,{children:[e.jsx(v,{children:e.jsx(Q,{isFr:i,disabled:t==1,href:`${s}${Number(t)-1}`})}),l.map(r=>e.jsx(v,{children:e.jsx(L,{href:`${s}${r}`,isActive:r==Number(t),children:r})},r)),e.jsx(v,{children:e.jsx(U,{isFr:i,href:`${s}${t+1}`,disabled:Number(t)>=n})})]})})};function X(s,t){let n,i;return t<=5?(n=1,i=t):s<=2?(n=1,i=5):s>=t-1?(n=t-4,i=t):(n=s-2,i=s+2),Array.from({length:i-n+1},(l,r)=>n+r).map(l=>Math.ceil(l))}function Z(){const[s,t]=c.useState(null),[n,i]=c.useState(!1);return c.useEffect(()=>{if(s)return;(async()=>{await T(1).then(r=>t(r[0])),i(!0)})()},[]),n?s?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"relative w-full  rounded-2xl aspect-16/9",children:ee(s)}),e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("p",{className:"text-center text-base sm:text-lg font-medium text-neutral-800 dark:text-neutral-200 line-clamp-1",children:s.title})})]}):null:e.jsxs("div",{children:[e.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden  aspect-16/9 m-1",children:e.jsx("div",{className:"bg-gray-300 h-full w-full"})}),e.jsx("div",{className:"px-4 py-1 space-y-2",children:e.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"})})]})}function ee(s){return s.Video?s.Video.includes("youtu")?e.jsx(se,{ad:s}):e.jsx("iframe",{className:"aspect-16/9 overflow-hidden ",src:s.Video,width:"100%",height:"100%",allow:"autoplay; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{borderRadius:"12px",border:"none"}}):e.jsx(V,{ad:s})}function V({ad:s}){return e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"group relative block w-full aspect-16/9 overflow-hidden rounded-2xl",children:e.jsx(J,{fill:!0,src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},altReal:s.title})})}function se({ad:s}){const[t,n]=c.useState(!1),[i,l]=c.useState(!1);return e.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-16/9",children:[e.jsx(V,{ad:s}),!t&&e.jsx(Y,{onClick:()=>n(!0),className:"absolute z-30 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:bg-accent-foreground rounded-full cursor-pointer",postType:"video"}),e.jsx("div",{className:u("flex items-center justify-center absolute inset-0",!i&&!t?"opacity-0":"opacity-100"),children:e.jsx(D,{})}),e.jsx(B,{url:s.Video,playing:t,style:{opacity:i?1:0},className:"z-20 absolute inset-0   transition-opacity",width:"100%",height:"100%",onPlay:()=>{l(!0),n(!0)},onPause:()=>{l(!1),n(!1)},onStart:()=>l(!0)})]})}function ae({categoryId:s,vr:t,code:n,page:i="1"}){var p,x;const l=k();P().state.location.pathname.includes("page/1")&&i==="1"&&l({to:t=="fr"?`/news/fr/${s}`:`/news/${s}`});const{data:a,isLoading:h}=_(n,i),{data:d,isLoading:w}=F("7j",(t=="fr"?1:2).toString()),j=(a==null?void 0:a.posts)??[],N=(d==null?void 0:d.posts)??[],f=c.useRef(null);c.useEffect(()=>{const m=E.throttle(()=>{const o=f.current;window.innerWidth>1e3&&window.scrollY>o.clientHeight-window.innerHeight+50?(o.style.position="sticky",o.style.top=`-${o.clientHeight-window.innerHeight+50}px`):(o.style.position="",o.style.top="0px")},10);return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const y=$()?(p=S.get(s))==null?void 0:p.name:(x=C.get(s))==null?void 0:x.name,g=Math.ceil(((a==null?void 0:a.total)??20)/20),b=`/news${t=="fr"?"/fr":""}/${s}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:t=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-8",children:y}),e.jsx(R,{posts:j,vr:t,loading:h}),e.jsx(A,{isFr:t==="fr",paginationLinkBase:b,current:Number(i),total:g})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsxs("div",{ref:f,className:"space-y-7",children:[e.jsx(Z,{}),e.jsx(H,{loading:w,posts:N.slice(0,10),full:!0,vr:t,hedding:t=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})]})})]})}function oe({categoryId:s,vr:t,code:n,page:i="1"}){var p,x;const l=k();P().state.location.pathname.includes("page/1")&&i==="1"&&l({to:t=="fr"?`/news/fr/${s}`:`/news/${s}`});const{data:a,isLoading:h}=I(t,i),{data:d,isLoading:w}=F("7j",(t=="fr"?1:2).toString()),j=(a==null?void 0:a.posts)??[],N=(d==null?void 0:d.posts)??[],f=c.useRef(null);c.useEffect(()=>{const m=E.throttle(()=>{const o=f.current;window.innerWidth>1e3&&window.scrollY>o.clientHeight-window.innerHeight+50?(o.style.position="sticky",o.style.top=`-${o.clientHeight-window.innerHeight+50}px`):(o.style.position="",o.style.top="0px")},10);return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const y=$()?(p=S.get(s))==null?void 0:p.name:(x=C.get(s))==null?void 0:x.name,g=Math.ceil(((a==null?void 0:a.total)??10)/10);console.log(g);const b=`/news${t=="fr"?"/fr":""}/${s}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:t=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-8",children:y}),e.jsx(R,{posts:j,vr:t,loading:h}),e.jsx(A,{isFr:t==="fr",paginationLinkBase:b,current:Number(i),total:g})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsx("div",{ref:f,className:"space-y-7",children:e.jsx(H,{loading:w,posts:N.slice(0,10),full:!0,vr:t,hedding:t=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})})})]})}export{Z as A,ae as C,oe as L};
