import{D as m,E as c,m as p,n as f,j as s,e as h}from"./index-CCCbwGBn.js";import{c as u,H as x}from"./NoInternet-CCGbDNo2.js";import{S as j}from"./SectionSliderPosts-D9sA9Abz.js";import{u as w}from"./getAds-Bexfyqt8.js";import{C as b,a as N}from"./image-B3D15iNC.js";const v="https://betaapin.fibladi.com/fibladi",L=(e,t="1")=>u({enabled:!!e,staleTime:6e5,queryKey:["top",{cat:e,page:t}],queryFn:async()=>{const o=await fetch(`${v}/bestnews/${e}?p=${t}`);if(!o.ok)throw new Error("faild to fetch posts");const{results:r,total:i}=await o.json();return{posts:m([r[0],...m(r.slice(1,10))].slice(0,4)).map(n=>c(n,!0)),total:i}}}),k=({vr:e,categorySlug:t})=>{const a=e==="fr"?p.get(t):f.get(t),{data:o,isLoading:r}=w(a==null?void 0:a.code,"1",!0),i=(o==null?void 0:o.posts)??[],d=e==="fr"?"/news/fr/$postId":"/news/$postId";return r?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-300 h-7 w-1/2 rounded"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-8",children:[1,2,3,4].map((l,n)=>s.jsxs("div",{children:[s.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden ",children:s.jsx("div",{className:"bg-gray-300 h-32 sm:h-44 w-full"})},n),s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"}),s.jsx("div",{className:"bg-gray-300 h-5 w-5/6 rounded"})]})]}))})]}):s.jsxs("div",{className:"relative mb-0 py-5",children:[s.jsx(x,{level:1,className:"mb-3",children:s.jsxs(h,{to:d,params:{postId:t},className:"flex items-center space-x-4 ",children:[a==null?void 0:a.name," ",e==="fr"?s.jsx(b,{size:19,strokeWidth:3,className:"mt-1"}):s.jsx(N,{size:19,strokeWidth:3,className:"mt-1"})]})}),s.jsx(j,{posts:i,perView:4,showViewAll:!0,viewAllLinkHref:e==="fr"?`/news/fr/${t}`:`/news/${t}`,vr:e})]})};export{k as L,L as u};
