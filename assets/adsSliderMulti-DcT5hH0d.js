import{j as e,c as x,e as u,r as p,u as y,a as I}from"./index-Ta-mg3OE.js";import{P as b,S as k,M as S}from"./SectionSliderPosts-C5pwU-gS.js";import{I as g,C,a as P}from"./image-B2KkzW4R.js";import{P as w,C as N,H as z,d as R,S as _,R as A}from"./NoInternet-DFULPTrw.js";import{C as F}from"./homeSliderMobile-Bq1eTdH3.js";import{b as H}from"./getAds-CrIiu3Hh.js";const M=({className:s,titleClass:t="text-lg",ratio:r="aspect-4/3",post:a,vr:l})=>{const{title:i,handle:h,featuredImage:o,categories:c,postType:f,id:n}=a,d=l==="fr"?"/news/fr/$postId":"/news/$postId",m=decodeURIComponent(h);return e.jsxs("div",{className:x("group post-card-18 relative flex flex-col overflow-hidden rounded-xl",s),children:[e.jsx("div",{className:x("relative size-full",r),children:f==="audio"?e.jsx(b,{post:a,vr:l,setIsHover:()=>{}}):e.jsxs(e.Fragment,{children:[e.jsx(g,{sizes:"(max-width: 1024px) 100vw, 33vw",alt:i,className:"size-full rounded-xl object-cover brightness-100 transition-[filter] duration-300 group-hover:brightness-75",src:o,fill:!0},a.id),e.jsx(u,{to:d,params:{postId:m},search:{id:n},"aria-label":a.title,className:"absolute inset-0"})]})}),e.jsx("div",{className:"absolute inset-x-0 top-0 flex flex-wrap gap-x-2 gap-y-1 p-4 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsx(w,{className:"ms-auto",handle:a.short_link,vr:l})}),e.jsx(u,{to:d,params:{postId:m},search:{id:n},"aria-label":a.title,className:"absolute inset-x-0 bottom-0 block h-1/2 bg-linear-to-t from-black opacity-80"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex grow flex-col p-6",children:[e.jsx(u,{to:d,params:{postId:m},search:{id:n},"aria-label":a.title,className:"absolute inset-0"}),e.jsx(N,{categories:c,vr:l},`${n}-category`),e.jsx("h2",{className:x("mt-3 leading-snug font-semibold text-white line-clamp-2",t),dangerouslySetInnerHTML:{__html:i}})]})]})},j=({className:s,titleClass:t="text-xl sm:text-2xl xl:text-3xl",ratio:r="aspect-4/3 sm:aspect-1/1",post:a,vr:l})=>{const{title:i,handle:h,featuredImage:o,categories:c,postType:f,id:n}=a,d=l==="fr"?"/news/fr/$postId":"/news/$postId",m=decodeURIComponent(h);return e.jsxs("div",{className:x("group post-card-19 relative flex flex-col overflow-hidden rounded-xl",s),children:[e.jsx("div",{className:x("relative size-full",r),children:f==="audio"?e.jsx(b,{post:a,vr:l,setIsHover:()=>{}}):e.jsxs(e.Fragment,{children:[e.jsx(g,{sizes:"(max-width: 1024px) 100vw, 50vw",className:"rounded-xl object-cover brightness-100 transition-[filter] duration-300 group-hover:brightness-75",src:o,alt:i,fill:!0},a.id),e.jsx(u,{"aria-label":a.title,to:d,params:{postId:m},search:{id:n},className:"absolute inset-0"})]})}),e.jsx(u,{"aria-label":a.title,to:d,params:{postId:m},search:{id:n},className:"absolute inset-x-0 bottom-0 block h-1/2 bg-linear-to-t from-black opacity-80"}),e.jsx("div",{className:"absolute inset-x-0 top-0 flex flex-wrap gap-x-2 gap-y-1 p-5 opacity-0 transition-opacity duration-300 group-hover:opacity-100 sm:px-7",children:e.jsx(w,{className:"ms-auto",handle:a.short_link,vr:l})}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex grow flex-col p-5 sm:p-8",children:[e.jsx(u,{"aria-label":a.title,to:d,params:{postId:m},search:{id:n},className:"absolute inset-0"}),e.jsx(N,{categories:c,vr:l},`${n}-category`),e.jsx("h2",{className:x("mt-3 leading-snug font-semibold text-white line-clamp-2",t),dangerouslySetInnerHTML:{__html:i}})]})]})},Y=({posts:s,className:t,vr:r,loading:a=!1,isHome:l=!1})=>{const[i,h]=p.useState([]);return p.useEffect(()=>{l&&fetch("https://apiw.fibladi.com/api/top-ads").then(o=>o.json()).then(o=>{h(o.data)}).catch(()=>{})},[]),a?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-6",children:[e.jsx("div",{className:"h-auto rounded-lg bg-gray-300 lg:col-span-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:col-span-3",children:[e.jsx("div",{className:"h-70  sm:h-60 col-span-2 sm:col-span-1 rounded-lg bg-gray-300"}),e.jsx("div",{className:"h-70  sm:h-60 col-span-2 sm:col-span-1 rounded-lg bg-gray-300"}),e.jsx("div",{className:"col-span-2 h-70  sm:h-92 rounded-lg bg-gray-300"})]})]}):s.length<1?null:e.jsx("div",{className:x("section-magazine-10 relative",t),children:e.jsxs("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-2",children:[s[0]&&e.jsx(j,{className:"shadow-lg shadow-black/30 transition-shadow",post:s[0],vr:r}),l&&i.length>0&&e.jsx("div",{className:"sm:hidden -mx-1.5 -my-3 p-0",dir:"ltr",children:e.jsx(F,{posts:i,isHome:!0})}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 sm:grid-rows-5",children:[s.filter((o,c)=>c<3&&c>=1).map((o,c)=>e.jsx(M,{className:"col-span-1 sm:row-span-2 shadow-lg shadow-black/30 transition-shadow",post:o,vr:r},c)),s[3]&&e.jsx(j,{ratio:"aspect-4/3 sm:aspect-16/1",className:"sm:col-span-2 sm:row-span-4 shadow-lg shadow-black/30 transition-shadow",vr:r,post:s[3]})]})]})})},q=({posts:s,vr:t,loading:r=!1})=>{const a=t==="fr"?"/news/fr/trending-6hours":"/news/trending-6hours";return r?e.jsxs("div",{className:"space-y-4 mt-5",children:[e.jsx("div",{className:"bg-gray-300 h-7 w-1/2 rounded"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-8",children:[1,2,3,4].map((l,i)=>e.jsxs("div",{children:[e.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden ",children:e.jsx("div",{className:"bg-gray-300 h-32 sm:h-44 w-full"})},i),e.jsxs("div",{className:"py-4 space-y-2",children:[e.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"}),e.jsx("div",{className:"bg-gray-300 h-5 w-5/6 rounded"})]})]}))})]}):s.length<3?null:e.jsxs("div",{className:"relative mb-4 mt-5",children:[e.jsx(z,{level:1,children:e.jsxs(u,{to:a,className:"flex items-center space-x-4 ",children:[t==="ar"?"ترند، الأكثر رواجًا":"Trending, les plus populaires ",t==="fr"?e.jsx(C,{size:19,strokeWidth:3,className:"mt-1"}):e.jsx(P,{size:19,strokeWidth:3,className:"mt-1"})]})}),e.jsx(k,{posts:s,perView:4,showViewAll:!0,viewAllLinkHref:t==="fr"?"/news/fr/trending":"/news/trending",vr:t})]})};function T(){const{data:s,isLoading:t}=H(8),r=y();return t||!(s!=null&&s.length)?null:e.jsx(S,{isFr:r,data:s,renderItem:a=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("div",{className:"relative aspect-8/6 overflow-hidden rounded-2xl",children:$(a)}),e.jsx("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("p",{className:"text-center text-base  font-semibold text-neutral-800 dark:text-neutral-200 line-clamp-2",children:a.title})})]},a.id),itemPerRow:4})}const G=p.memo(T);function $(s){return s.Video?s.Video.includes("youtu")?e.jsx(L,{ad:s}):e.jsx("iframe",{src:s.Video,width:"100%",height:"100%",allow:"autoplay; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{borderRadius:"12px",border:"none"}}):e.jsx(v,{ad:s})}function v({ad:s}){return s.Video?e.jsx(g,{src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},altReal:s.title,fill:!0}):e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"group block h-full w-full z-40",children:e.jsx(g,{src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},altReal:s.title,fill:!0})})}function L({ad:s}){const[t,r]=p.useState(!1),[a,l]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(v,{ad:s}),!t&&e.jsx(R,{onClick:()=>r(!0),className:"absolute z-30 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:bg-accent-foreground rounded-full cursor-pointer",postType:"video"}),e.jsx("div",{className:I("flex items-center justify-center absolute inset-0",!a&&!t?"opacity-0":"opacity-100"),children:e.jsx(_,{})}),e.jsx(A,{url:s.Video,playing:t,className:"z-20 absolute inset-0 bg-neutral-900 transition-opacity",width:"100%",height:"100%",onPlay:()=>l(!0),onPause:()=>{l(!1),r(!1)},onStart:()=>l(!0)})]})}export{G as A,Y as S,q as T};
