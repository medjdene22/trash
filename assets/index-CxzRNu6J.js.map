{"version":3,"file":"index-CxzRNu6J.js","sources":["../../src/routes/news/fr/$postId/index.tsx?tsr-split=component"],"sourcesContent":["// routes/posts/$postId.tsx\n// import SingleContentContainer from '@/components/single/SingleContentContainer'\n// import SingleHeaderContainer from '@/components/single/SingleHeaderContainer'\nimport { createFileRoute } from '@tanstack/react-router'\n// import SingleRelatedPosts from '@/components/single/SingleRelatedPosts'\n// import Weekly from '@/components/weekly'\nimport PageSkeleton from '@/components/post-skeleton'\nimport {\n  categoriesFr,\n  homeCategoriesFR,\n  categoriesFR,\n  trendingFr,\n  TPostDetail,\n  pages,\n} from '@/types'\nimport CategoryComponent from '@/components/category'\nimport HomeCategory from '@/components/homeCategory'\nimport { getPostByHandle } from '@/data/posts'\nimport TrendingPosts from '@/components/trendingPosts'\nimport LastComponent from '@/components/lastNews'\n// import { useGetTrending } from '@/query/post/getTrendingByTime'\n// import { useGetPostByCat } from '@/query/post/getLastByCategory'\nimport { queryClient } from '@/main'\nimport { PostComponent } from '@/components/singlePost'\nimport { getMimeFromFibladi } from '@/lib/utils'\n// import { useGetPost } from '@/query/post/getPost'\nimport z from 'zod'\n\nconst fetchPost = (lang: 'fr' | 'ar', postSlug: string, id?: number) =>\n  getPostByHandle(postSlug, lang, id).then((res) => res.post)\n\nexport const Route = createFileRoute('/news/fr/$postId/')({\n  validateSearch: z.object({\n    id: z.coerce.number().optional(), // will parse ?p=123 into number 123\n  }),\n  staleTime: 3600000,\n  preloadStaleTime: 3600000,\n  loaderDeps: ({ search: { id } }) => ({ id }),\n  loader: async ({ params: { postId }, deps: { id } }) => {\n    if (!id) {\n      if (trendingFr.has(postId)) {\n        return {\n          postId,\n          post: null,\n          relatedPosts: [],\n          type: 'trending',\n        }\n      } else if (pages.has(postId)) {\n        return {\n          postId,\n          post: null,\n          relatedPosts: [],\n          type: 'page',\n        }\n      } else if (categoriesFr.has(postId)) {\n        return {\n          postId,\n          code: categoriesFr.get(decodeURIComponent(postId))?.code,\n          relatedPosts: [],\n          type: 'category',\n        }\n      } else if (homeCategoriesFR.has(postId)) {\n        return {\n          postId,\n          code: categoriesFR.get(decodeURIComponent(postId))?.code,\n          relatedPosts: [],\n          type: 'categoryHome',\n        }\n      }\n    }\n    const post: TPostDetail = await queryClient.ensureQueryData({\n      queryKey: ['post', { lang: 'fr', postSlug: postId }],\n      staleTime: 100000,\n\n      queryFn: () =>\n        fetchPost('fr', postId, id).then((res) => {\n          return res\n        }),\n    })\n\n    // console.log('res', data)\n    // const postsRes = await fetch(\n    //   `https://bladiscra.medjdenimadeddine.workers.dev/posts/${postId}`,\n    // )\n    // const { post, relatedPosts } = await postsRes.json()\n\n    return { postId, post, type: 'post' }\n  },\n  // errorComponent: PageSkeleton,\n  pendingMs: 200,\n  pendingMinMs: 200,\n  pendingComponent: () => {\n    const { postId } = Route.useParams()\n    let type: 'categoryHome' | 'category' | 'post' | 'trending'\n    if (categoriesFr.has(postId) || trendingFr.has(postId)) {\n      type = 'category'\n    } else if (homeCategoriesFR.has(postId)) {\n      type = 'categoryHome'\n    } else {\n      type = 'post'\n    }\n    return <PageSkeleton type={type} />\n  },\n  // notFoundComponent: () => <div>post Not found</div>,\n\n  // errorComponent: ({ error, reset }) => (\n  //   <div>\n  //     <h2>Error loading post</h2>\n  //     <p>{error.message}</p>\n  //     <button onClick={reset}>Try Again</button>\n  //   </div>\n  // ),\n\n  component: () => {\n    const { type, postId, code, post } = Route.useLoaderData()\n    if (type === 'trending') {\n      return <TrendingPosts trendingwhen={postId} vr=\"fr\" />\n    } else if (type === 'category') {\n      if (!!code && code < 3)\n        return (\n          <LastComponent categoryId={postId} vr=\"fr\" code={code} page=\"1\" />\n        )\n      return (\n        <CategoryComponent\n          categoryId={postId}\n          vr=\"fr\"\n          code={code as number}\n          page=\"1\"\n        />\n      )\n    } else if (type === 'page') {\n      return <StaticPage name={pages.get(postId)?.nameFr ?? ''} />\n    } else if (type === 'categoryHome') {\n      return <HomeCategory categoryId={postId} vr=\"fr\" code={code as number} />\n    } else if (type === 'post') {\n      return <PostComponent post={post as TPostDetail} vr=\"fr\" />\n    }\n  },\n  head: ({ params: { postId }, loaderData }) => {\n    const post = loaderData?.post\n    const type = loaderData?.type\n    const isPost = type === 'post' && !!post\n\n    const title: string = isPost\n      ? post.title\n      : pages.has(postId)\n        ? pages.get(postId)?.nameFr || 'page'\n        : categoriesFR.get(postId)?.name || 'categoriy'\n\n    const description = isPost ? post.excerpt : categoriesFR.get(postId)?.name\n    const keywords = isPost\n      ? post.title\n          .split(' ')\n          .slice(0, 9)\n          .concat(post.categories[0].name)\n          .join(', ')\n      : categoriesFR.get(postId)?.name\n    return {\n      meta: [\n        { name: 'description', content: description },\n        { title: title },\n        { name: 'keywords', content: keywords },\n\n        // You can add more meta or override\n        //\n        { property: 'og:locale', content: 'fr_FR' },\n        { property: 'og:type', content: 'article' },\n        {\n          property: 'og:title',\n          content: title,\n        },\n        {\n          property: 'og:description',\n          content: isPost ? post.excerpt : categoriesFR.get(postId)?.name,\n        },\n        {\n          property: 'og:url',\n          content: 'https://fibladi.com/news/fr/' + postId,\n        },\n\n        { property: 'og:site_name', content: 'fibladi' },\n        {\n          property: 'article:published_time',\n          content: isPost ? post.date : '2025-09-09T14:42:20+00:00',\n        },\n        {\n          property: 'og:image',\n          content: isPost\n            ? post.featuredImage.src\n            : 'https://fibladi.com/news/fr/wp-content/uploads/sites/2/2019/10/default-390x260-1.jpg',\n        },\n        { property: 'og:image:width', content: '895' },\n        { property: 'og:image:height', content: '576' },\n        {\n          property: 'og:image:type',\n          content: getMimeFromFibladi(post?.featuredImage.src),\n        },\n\n        {\n          property: 'twitter:card',\n          content: 'summary',\n        },\n        {\n          property: 'twitter:creator',\n          content: '@fibladi',\n        },\n        {\n          property: 'twitter:site',\n          content: '@fibladi',\n        },\n        {\n          property: 'twitter:title',\n          content: title,\n        },\n        {\n          property: 'twitter:description',\n          content: isPost ? post.excerpt : categoriesFR.get(postId)?.name,\n        },\n      ],\n      links: [\n        {\n          rel: 'canonical',\n          href: 'https://fibladi.com/news/' + postId,\n        },\n      ],\n    }\n  },\n})\n\nfunction StaticPage({ name }: { name: string }) {\n  return (\n    <div className=\"container min-h-52 flex items-center justify-center  text-3xl font-bold\">\n      {name}\n    </div>\n  )\n}\n"],"names":["StaticPage","name","jsx","SplitComponent","type","postId","code","post","Route","useLoaderData","TrendingPosts","LastComponent","CategoryComponent","pages","get","nameFr","HomeCategory","PostComponent"],"mappings":"8sBAqOA,SAASA,EAAW,CAAEC,KAAAA,CAAuB,EAAG,CAC9C,OACEC,EAAAA,IAAC,MAAA,CAAI,UAAU,0EACZD,SAAAA,EACH,CAEJ,CAAC,MAAAE,EA1HYA,IAAM,OACf,KAAM,CAAEC,KAAAA,EAAMC,OAAAA,EAAQC,KAAAA,EAAMC,KAAAA,CAAAA,EAASC,EAAMC,cAAAA,EAC3C,GAAIL,IAAS,WACX,OAAOF,EAAAA,IAACQ,EAAA,CAAc,aAAcL,EAAQ,GAAG,KAAI,EACrD,GAAWD,IAAS,WAClB,OAAME,GAAQA,EAAO,EAEjBJ,EAAAA,IAACS,EAAA,CAAc,WAAYN,EAAQ,GAAG,KAAK,KAAAC,EAAY,KAAK,IAAG,EAGjEJ,MAACU,GACC,WAAYP,EACZ,GAAG,KACH,KAAAC,EACA,KAAK,IAAG,EAGd,GAAWF,IAAS,OAClB,OAAOF,EAAAA,IAACF,GAAW,OAAMa,EAAAA,EAAMC,IAAIT,CAAM,IAAhBQ,YAAAA,EAAmBE,SAAU,GAAG,EAC3D,GAAWX,IAAS,eAClB,aAAQY,EAAA,CAAa,WAAYX,EAAQ,GAAG,KAAK,KAAAC,EAAqB,EACxE,GAAWF,IAAS,OAClB,OAAOF,EAAAA,IAACe,EAAA,CAAc,KAAAV,EAA2B,GAAG,IAAA,CAAI,CAE5D"}