import{j as e,c as f,r as w,z as v,e as h,E as I,D as k}from"./index-Dx3HmQoI.js";import{M as D,C,P as M,u as A,N as P,H as R}from"./NoInternet-BCq95UYh.js";import{I as T}from"./image-BVQGADuE.js";import{P as z,u as L}from"./spin-loading-CP7Clu8l.js";import{C as $,a as E}from"./button-BblN0-ZT.js";const H=({date:n,className:r,vr:s})=>{const i=new Date(n),c=new Date,a=(i.getTime()-c.getTime())/1e3-3600,d=new Intl.RelativeTimeFormat(s,{numeric:"auto"});let t,o;const l=Math.abs(a);return l<60?(t=Math.round(a),o="second"):l<3600?(t=Math.round(a/60),o="minute"):l<86400?(t=Math.round(a/3600),o="hour"):l<2592e3?(t=Math.round(a/86400),o="day"):l<31536e3?(t=Math.round(a/2592e3),o="month"):(t=Math.round(a/31536e3),o="year"),e.jsx("time",{dateTime:n,className:r,children:d.format(t,o).replace(/^قبل\s/,"منذ ")})},S=({className:n,meta:r,vr:s})=>{const{date:i}=r;return e.jsx("div",{className:f("post-card-meta flex flex-wrap items-center text-xs/6",n),children:e.jsx("span",{className:"font-normal text-neutral-500 dark:text-neutral-400",children:e.jsx(H,{date:i,vr:s})})})},B=({className:n,post:r,vr:s})=>{const{title:i,handle:c,featuredImage:a,excerpt:d,categories:t,postType:o,id:l,videoUrl:m,short_link:u}=r,p=s==="fr"?"/news/fr/$postId":"/news/$postId",j=decodeURIComponent(c),[x,g]=w.useState(!1),N=w.useRef(null),b=v(),y=!!a.src&&!a.src.includes("placehold")&&!a.src.includes("/default-");return e.jsxs("div",{ref:N,className:f("group post-card-3 flex flex-wrap items-center gap-x-7 gap-y-5 sm:flex-nowrap ",n),children:[e.jsxs("div",{className:f("overflow-hidden relative aspect-16/9 sm:aspect-1/1 w-full  sm:w-56 shrink-0 rounded-2xl shadow-lg transition-shadow shadow-black/30",!y&&"hidden sm:block"),children:[e.jsx(T,{src:a,alt:i,className:"w-full rounded-2xl  object-cover brightness-100 transition-[filter] duration-300 group-hover:brightness-75",fill:!0}),!x&&m&&e.jsx(z,{onClick:()=>g(!x),className:"absolute z-30 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:bg-accent-foreground rounded-full cursor-pointer",postType:o,wrapSize:"size-12",iconSize:"size-7"}),m&&e.jsx(D,{setIsHover:()=>g(!x),isHover:x,videoUrl:m,handle:c,vr:s}),e.jsx(h,{"aria-label":r.title,to:p,params:{postId:j},search:{id:l},...!b&&{target:"_blank"},className:"absolute inset-0"})]}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("div",{className:"space-y-3.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{categories:t,vr:s}),e.jsx(M,{handle:u,className:"ms-auto",vr:s},l)]}),e.jsx("h2",{className:"nc-card-title block text-base font-medium sm:font-semibold xl:text-lg",children:e.jsx(h,{"aria-label":r.title,to:p,params:{postId:j},search:{id:l},className:"line-clamp-2",title:i,dangerouslySetInnerHTML:{__html:i}})}),e.jsx("p",{className:"line-clamp-3 text-sm/6 text-neutral-600 dark:text-neutral-400",children:d})]}),e.jsx("div",{className:"py-1",children:e.jsx(S,{meta:r,vr:s})})]})]})},G=({posts:n,heading:r,vr:s,loading:i,linkto:c})=>{const a=(m,u)=>e.jsx(B,{className:"py-1",post:m,vr:s},u),{isOnline:d,checkConnection:t}=A(),o=s==="fr"?"/news/fr/$postId":"/news/$postId",l=c??(s==="fr"?"dernieres-actualites":decodeURIComponent("%D8%A2%D8%AE%D8%B1-%D8%A7%D9%84%D8%A3%D8%AE%D8%A8%D8%A7%D8%B1"));return i?e.jsxs("div",{className:"pt-4",children:[" ",e.jsx("div",{className:"space-y-6 lg:col-span-2",children:Array.from({length:8}).map((m,u)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-50 w-56 rounded-lg bg-gray-300"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),e.jsx("div",{className:"h-4 w-full rounded bg-gray-200"})]})]},u))})]}):n.length==0?(t(),e.jsx("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20 mx-auto",children:!d&&e.jsx(P,{isFr:s==="fr",isOnline:d,onRetry:()=>window.location.reload(),checkConnection:t})})):e.jsxs("div",{className:"pt-4",children:[!!r&&e.jsx(R,{level:2,children:e.jsxs(h,{to:o,params:{postId:l},className:"flex items-center space-x-4 ",children:[r,s==="fr"?e.jsx($,{size:19,strokeWidth:3,className:"mt-1"}):e.jsx(E,{size:19,strokeWidth:3,className:"mt-1"})," "]})}),e.jsx("div",{className:f("grid gap-6 md:gap-7"),children:n.map(a)})]})},W="https://betaapin.fibladi.com/fibladi",K=(n,r,s)=>L({enabled:!!n,staleTime:6e5,queryKey:["cat",{cat:n,page:r,rand:!!s}],queryFn:async()=>{const c=await fetch(`${W}/categorie/${n}?p=${r}`);if(!c.ok)throw new Error("faild to fetch posts");const{results:a,total:d}=await c.json(),t=a.map(l=>I(l));return{posts:s?k(t):t,total:d}}});export{G as L,H as a,K as u};
//# sourceMappingURL=getLastByCategory-ZwIM98xV.js.map
