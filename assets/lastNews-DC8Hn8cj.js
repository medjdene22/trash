import{j as e,a as f,b as D,r as u,l as P,S as H,u as E,T as M,V as A,B as v}from"./index-CvY7fm90.js";import{u as Y,L as I}from"./getLastByCategory-B4PkROOz.js";import{a as R,W,b as Z}from"./NoInternet-kGTv14kU.js";import{P as q,S as J,R as K,_}from"./spin-loading-w0r51tOe.js";import{a as T,C as V,b as O,B as $}from"./button-DepipkRy.js";import{I as Q}from"./image-Cb2ml1i6.js";import{f as U}from"./getAds-Dvc8u2Ur.js";import{P as S}from"./plus-DCKbEgd-.js";function X({className:t,...s}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:f("mx-auto flex w-full justify-center",t),...s})}function ee({className:t,...s}){return e.jsx("ul",{"data-slot":"pagination-content",className:f("flex flex-row items-center gap-1",t),...s})}function L({...t}){return e.jsx("li",{"data-slot":"pagination-item",...t})}function C({className:t,isActive:s,size:n="icon",...a}){return e.jsx(D,{"aria-current":s?"page":void 0,"data-slot":"pagination-link","data-active":s,className:f(O({variant:s?"outline":"secondary",size:n}),t,s?"text-white bg-lime-600 hover:bg-lime-500 hover:text-white":"hover:bg-lime-500 hover:text-white"),...a})}function se({className:t,isFr:s,...n}){return e.jsx(C,{"aria-label":"Go to previous page",size:"default",className:f("gap-1 px-2.5 sm:pl-2.5",t),...n,children:s?e.jsx(T,{className:"size-4",strokeWidth:3}):e.jsx(V,{className:"size-4",strokeWidth:3})})}function te({className:t,isFr:s,...n}){return e.jsxs(C,{"aria-label":"Go to next page",size:"default",className:f("gap-1 px-2.5 sm:pr-2.5",t),...n,children:[s?e.jsx(V,{className:"size-4",strokeWidth:3}):e.jsx(T,{className:"size-4",strokeWidth:3})," "]})}const B=({paginationLinkBase:t,current:s,total:n,isFr:a=!0})=>{const i=ne(Number(s),n);return e.jsx(X,{className:"mt-12",children:e.jsxs(ee,{children:[e.jsx(L,{children:e.jsx(se,{isFr:a,disabled:s==1,href:`${t}${Number(s)-1}`})}),i.map(c=>e.jsx(L,{children:e.jsx(C,{href:`${t}${c}`,isActive:c==Number(s),children:c})},c)),e.jsx(L,{children:e.jsx(te,{isFr:a,href:`${t}${s+1}`,disabled:Number(s)>=n})})]})})};function ne(t,s){let n,a;return s<=5?(n=1,a=s):t<=2?(n=1,a=5):t>=s-1?(n=s-4,a=s):(n=t-2,a=t+2),Array.from({length:a-n+1},(i,c)=>n+c).map(i=>Math.ceil(i))}function F({isFR:t}){const[s,n]=u.useState(null),[a,i]=u.useState(!1);return u.useEffect(()=>{if(s)return;(async()=>{await U(1).then(l=>n(l[0])),i(!0)})()},[]),a?s?e.jsxs("div",{className:"flex flex-col gap-2 group",children:[e.jsx("div",{className:"relative w-full  rounded-2xl ",children:ae(s)}),e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer","aria-label":s.title,children:e.jsx("p",{className:"text-center text-base sm:text-lg font-medium text-neutral-800 dark:text-neutral-200 line-clamp-2",children:s.title})}),e.jsx($,{variant:"hero",size:"lg",className:"gap-2 mt-4 mx-0.5 md:text-base",asChild:!0,children:e.jsxs("a",{target:"_blank",href:`https://ana.fibladi.com/${t?"fr":"ar"}/ads/create/`,className:" ",children:[e.jsx(S,{className:"w-5 h-5"}),t?"Publiez votre annonce":"أنشر أعلانك"]})})]}):null:e.jsxs("div",{children:[e.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden  aspect-16/9 m-1",children:e.jsx("div",{className:"bg-gray-300 h-full w-full"})}),e.jsx("div",{className:"px-4 py-1 space-y-2",children:e.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"})}),e.jsxs($,{variant:"hero",size:"lg",className:"gap-2 w-full my-4",children:[e.jsx(S,{className:"w-5 h-5"}),t?"Publiez votre annonce":"أنشر أعلانك"]})]})}function ae(t){return t.Video?t.Video.includes("youtu")?e.jsx(le,{ad:t}):e.jsx("iframe",{className:"aspect-16/9 overflow-hidden ",src:t.Video,width:"100%",height:"100%",allow:"autoplay; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{borderRadius:"12px",border:"none"}}):e.jsx(G,{ad:t})}function G({ad:t}){return e.jsxs("a",{"aria-label":t.title,href:t.link,target:"_blank",rel:"noopener noreferrer",className:`
            relative block w-full
            aspect-video

            h-auto max-h-[70vh]
            overflow-hidden
            rounded-2xl
            bg-black
            shadow-lg shadow-black/30 transition-shadow
          `,children:[e.jsx(Q,{fill:!0,src:{src:`https://images2.fibladi.com/H400/${t.image.split(".")[0]}.webp`},alt:t.title,className:"object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/25 opacity-0 transition-opacity group-hover:opacity-80"})]})}function le({ad:t}){const[s,n]=u.useState(!1),[a,i]=u.useState(!1);return e.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-16/9",children:[e.jsx(G,{ad:t}),!s&&e.jsx(q,{onClick:()=>n(!0),className:"absolute z-30 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:bg-accent-foreground rounded-full cursor-pointer",postType:"video"}),e.jsx("div",{className:f("flex items-center justify-center absolute inset-0",!a&&!s?"opacity-0":"opacity-100"),children:e.jsx(J,{})}),e.jsx(K,{url:t.Video,playing:s,style:{opacity:a?1:0},className:"z-20 absolute inset-0   transition-opacity",width:"100%",height:"100%",onPlay:()=>{i(!0),n(!0)},onPause:()=>{i(!1),n(!1)},onStart:()=>i(!0)})]})}function xe({categoryId:t,vr:s,code:n,page:a="1"}){var g,w;const i=P();H().state.location.pathname.includes("page/1")&&a==="1"&&i({to:s=="fr"?`/news/fr/${t}`:`/news/${t}`});const{data:l,isLoading:x}=Y(n,a),{data:d,isLoading:p}=R("7j",(s=="fr"?1:2).toString()),m=(l==null?void 0:l.posts)??[],o=(d==null?void 0:d.posts)??[],h=u.useRef(null);u.useEffect(()=>{const j=_.throttle(()=>{const r=h.current;window.innerWidth>1e3&&window.scrollY>r.clientHeight-window.innerHeight+50?(r.style.position="sticky",r.style.top=`-${r.clientHeight-window.innerHeight+50}px`):(r.style.position="",r.style.top="0px")},10);return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]);const b=E()?(g=M.get(t))==null?void 0:g.name:(w=A.get(t))==null?void 0:w.name,y=Math.ceil(((l==null?void 0:l.total)??20)/20),k=`/news${s=="fr"?"/fr":""}/${t}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:s=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-8",children:b}),e.jsx(I,{posts:m,vr:s,loading:x}),e.jsx(B,{isFr:s==="fr",paginationLinkBase:k,current:Number(a),total:y})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsxs("div",{ref:h,className:"space-y-7",children:[e.jsx(F,{}),e.jsx(W,{loading:p,posts:o.slice(0,10),full:!0,vr:s,hedding:s=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})]})})]})}const z=`<svg viewBox='0 0 36 36' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M18.25 32.6667C26.3502 32.6667 32.9167 26.1002 32.9167 18C32.9167 9.89983 26.3502 3.33334 18.25 3.33334C10.1498 3.33334 3.58333 9.89983 3.58333 18C3.58333 26.1002 10.1498 32.6667 18.25 32.6667Z' stroke='currentColor' stroke-width='2.93333' stroke-linecap='round' stroke-linejoin='round'/><path d='M18.25 9.20001V18L24.1167 20.9333' stroke='currentColor' stroke-width='2.93333' stroke-linecap='round' stroke-linejoin='round'/></svg>
`,ie=({tabActive:t,onChangeTab:s,isFr:n})=>{const a=P(),i=n?"/news/fr/$postId":"/news/$postId",c=new Map([["1h","trending-lasthours"],["6h","trending-6hours"],["24h","trending"],["7 days","trending-7days"],["30 days","trending-30days"]]),l=new Map([["1 ساعة","trending-lasthours"],["6 ساعات","trending-6hours"],["24 ساعة","trending"],["7 أيام","trending-7days"],["30 يومًا","trending-30days"]]),x=n?c:l,d=n?Array.from(c.keys()):Array.from(l.keys()),p=n?"Dernières News":"آخر الأخبار",m=o=>{if(o==="last"){a({to:n?"/news/fr/$postId":"/news/$postId",params:{postId:n?"dernieres-actualites":"آخر-الأخبار"}});return}a({to:i,params:{postId:x.get(o)||"trending"}}),s&&s(o)};return e.jsx("div",{className:"section-tab-header relative mb-2 flex flex-col ",children:e.jsxs("div",{className:"flex grow flex-wrap gap-2",children:[t.fr==="last"?e.jsxs(v,{color:"lime",onClick:()=>m("last"),className:"cursor-pointer",children:[e.jsx("div",{className:"  h-4  xl:w-5 xl:h-5 ",style:{color:"#F502E4"},dangerouslySetInnerHTML:{__html:z}}),p]},"last"):e.jsxs(v,{outline:!0,onClick:()=>m("last"),className:"cursor-pointer",children:[e.jsx("div",{className:" h-4  xl:w-5 xl:h-5 ",style:{color:"#F502E4"},dangerouslySetInnerHTML:{__html:z}}),p]},"last"),d.map(o=>t[n?"fr":"ar"]===o?e.jsx(v,{color:"lime",onClick:()=>m(o),className:"cursor-pointer",children:o},o):e.jsx(v,{className:"cursor-pointer",onClick:()=>m(o),outline:!0,children:o},o))]})})};function he({categoryId:t,vr:s,code:n,page:a="1"}){var g,w;const i=P();H().state.location.pathname.includes("page/1")&&a==="1"&&i({to:s=="fr"?`/news/fr/${t}`:`/news/${t}`});const{data:l,isLoading:x}=Z(s,a),{data:d,isLoading:p}=R("7j",(s=="fr"?1:2).toString()),m=(l==null?void 0:l.posts)??[],o=(d==null?void 0:d.posts)??[],h=u.useRef(null);u.useEffect(()=>{const j=_.throttle(()=>{const r=h.current;window.innerWidth>1e3&&window.scrollY>r.clientHeight-window.innerHeight+50?(r.style.position="sticky",r.style.top=`-${r.clientHeight-window.innerHeight+50}px`):(r.style.position="",r.style.top="0px")},10);return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]);const N=E(),b=N?(g=M.get(t))==null?void 0:g.name:(w=A.get(t))==null?void 0:w.name,y=Math.ceil(((l==null?void 0:l.total)??10)/10);console.log(y);const k=`/news${s=="fr"?"/fr":""}/${t}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:s=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6",children:b}),e.jsx(ie,{isFr:N,tabActive:{fr:"last",ar:"last"}}),e.jsx(I,{posts:m,vr:s,loading:x}),e.jsx(B,{isFr:s==="fr",paginationLinkBase:k,current:Number(a),total:y})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsxs("div",{ref:h,className:"space-y-7",children:[e.jsx(F,{isFR:N},"last"),e.jsx(W,{loading:p,posts:o.slice(0,10),full:!0,vr:s,hedding:s=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})]})})]})}export{F as A,xe as C,he as L,ie as S};
//# sourceMappingURL=lastNews-DC8Hn8cj.js.map
