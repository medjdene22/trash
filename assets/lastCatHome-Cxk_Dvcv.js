import{D as d,E as c,m as p,n as f,j as s,e as h}from"./index-QIU-qtJw.js";import{u}from"./spin-loading-DY14fL5w.js";import{H as x}from"./NoInternet-Bf-nX2T7.js";import{S as j}from"./SectionSliderPosts-BMWa0Sdd.js";import{u as w}from"./getLastByCategory-Cpan1acE.js";import{C as b,a as N}from"./button-6ZA8KkXC.js";const v="https://betaapin.fibladi.com/fibladi",k=(e,t="1")=>u({enabled:!!e,staleTime:6e5,queryKey:["top",{cat:e,page:t}],queryFn:async()=>{const a=await fetch(`${v}/bestnews/${e}?p=${t}`);if(!a.ok)throw new Error("faild to fetch posts");const{results:r,total:i}=await a.json();return{posts:d([r[0],...d(r.slice(1,10))].slice(0,4)).map(n=>c(n,!0)),total:i}}}),q=({vr:e,categorySlug:t})=>{const o=e==="fr"?p.get(t):f.get(t),{data:a,isLoading:r}=w(o==null?void 0:o.code,"1",!0),i=(a==null?void 0:a.posts)??[],m=e==="fr"?"/news/fr/$postId":"/news/$postId";return r?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-300 h-7 w-1/2 rounded"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-8",children:[1,2,3,4].map((l,n)=>s.jsxs("div",{children:[s.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden ",children:s.jsx("div",{className:"bg-gray-300 h-32 sm:h-44 w-full"})},n),s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"}),s.jsx("div",{className:"bg-gray-300 h-5 w-5/6 rounded"})]})]}))})]}):s.jsxs("div",{className:"relative mb-0 py-5",children:[s.jsx(x,{level:1,className:"mb-3",children:s.jsxs(h,{to:m,params:{postId:t},className:"flex items-center space-x-4 ",children:[o==null?void 0:o.name," ",e==="fr"?s.jsx(b,{size:19,strokeWidth:3,className:"mt-1"}):s.jsx(N,{size:19,strokeWidth:3,className:"mt-1"})]})}),s.jsx(j,{posts:i,perView:4,showViewAll:!0,viewAllLinkHref:e==="fr"?`/news/fr/${t}`:`/news/${t}`,vr:e})]})};export{q as L,k as u};
