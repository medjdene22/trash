import{j as e,a as x,e as G,r as u,l as C,S,u as H,T as E,V as M,B as N}from"./index-c1zhYnJF.js";import{f as B,u as D,L as R}from"./getAds-D_Wi8zJM.js";import{d as Y,S as Z,R as q,a as A,_ as I,W,b as J}from"./NoInternet-BiEA7q5t.js";import{a as z,C as _,b as K,I as O}from"./image-BJCmgr1d.js";function Q({className:s,...t}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:x("mx-auto flex w-full justify-center",s),...t})}function U({className:s,...t}){return e.jsx("ul",{"data-slot":"pagination-content",className:x("flex flex-row items-center gap-1",s),...t})}function L({...s}){return e.jsx("li",{"data-slot":"pagination-item",...s})}function $({className:s,isActive:t,size:n="icon",...l}){return e.jsx(G,{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:x(K({variant:t?"outline":"secondary",size:n}),s,t?"text-white bg-lime-600 hover:bg-lime-500 hover:text-white":"hover:bg-lime-500 hover:text-white"),...l})}function X({className:s,isFr:t,...n}){return e.jsx($,{"aria-label":"Go to previous page",size:"default",className:x("gap-1 px-2.5 sm:pl-2.5",s),...n,children:t?e.jsx(z,{className:"size-4",strokeWidth:3}):e.jsx(_,{className:"size-4",strokeWidth:3})})}function ee({className:s,isFr:t,...n}){return e.jsxs($,{"aria-label":"Go to next page",size:"default",className:x("gap-1 px-2.5 sm:pr-2.5",s),...n,children:[t?e.jsx(_,{className:"size-4",strokeWidth:3}):e.jsx(z,{className:"size-4",strokeWidth:3})," "]})}const T=({paginationLinkBase:s,current:t,total:n,isFr:l=!0})=>{const i=se(Number(t),n);return e.jsx(Q,{className:"mt-12",children:e.jsxs(U,{children:[e.jsx(L,{children:e.jsx(X,{isFr:l,disabled:t==1,href:`${s}${Number(t)-1}`})}),i.map(r=>e.jsx(L,{children:e.jsx($,{href:`${s}${r}`,isActive:r==Number(t),children:r})},r)),e.jsx(L,{children:e.jsx(ee,{isFr:l,href:`${s}${t+1}`,disabled:Number(t)>=n})})]})})};function se(s,t){let n,l;return t<=5?(n=1,l=t):s<=2?(n=1,l=5):s>=t-1?(n=t-4,l=t):(n=s-2,l=s+2),Array.from({length:l-n+1},(i,r)=>n+r).map(i=>Math.ceil(i))}function V(){const[s,t]=u.useState(null),[n,l]=u.useState(!1);return u.useEffect(()=>{if(s)return;(async()=>{await B(1).then(r=>t(r[0])),l(!0)})()},[]),n?s?e.jsxs("div",{className:"flex flex-col gap-2 group",children:[e.jsx("div",{className:"relative w-full  rounded-2xl aspect-16/9",children:te(s)}),e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("p",{className:"text-center text-base sm:text-lg font-medium text-neutral-800 dark:text-neutral-200 line-clamp-2",children:s.title})})]}):null:e.jsxs("div",{children:[e.jsx("div",{className:"animate-pulse rounded-3xl overflow-hidden  aspect-16/9 m-1",children:e.jsx("div",{className:"bg-gray-300 h-full w-full"})}),e.jsx("div",{className:"px-4 py-1 space-y-2",children:e.jsx("div",{className:"bg-gray-300 h-5 w-full rounded"})})]})}function te(s){return s.Video?s.Video.includes("youtu")?e.jsx(ne,{ad:s}):e.jsx("iframe",{className:"aspect-16/9 overflow-hidden ",src:s.Video,width:"100%",height:"100%",allow:"autoplay; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{borderRadius:"12px",border:"none"}}):e.jsx(F,{ad:s})}function F({ad:s}){return e.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:`
        relative block w-full
        max-h-[calc(100vw*16/9)]
        overflow-hidden
        rounded-2xl
        bg-black
        shadow-lg shadow-black/30 transition-shadow
      `,children:[e.jsx(O,{fill:!0,src:{src:`https://images2.fibladi.com/H300/${s.image.split(".")[0]}.webp`},alt:s.title,className:"object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-black/25 opacity-0 transition-opacity group-hover:opacity-80"})]})}function ne({ad:s}){const[t,n]=u.useState(!1),[l,i]=u.useState(!1);return e.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-16/9",children:[e.jsx(F,{ad:s}),!t&&e.jsx(Y,{onClick:()=>n(!0),className:"absolute z-30 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:bg-accent-foreground rounded-full cursor-pointer",postType:"video"}),e.jsx("div",{className:x("flex items-center justify-center absolute inset-0",!l&&!t?"opacity-0":"opacity-100"),children:e.jsx(Z,{})}),e.jsx(q,{url:s.Video,playing:t,style:{opacity:l?1:0},className:"z-20 absolute inset-0   transition-opacity",width:"100%",height:"100%",onPlay:()=>{i(!0),n(!0)},onPause:()=>{i(!1),n(!1)},onStart:()=>i(!0)})]})}function ce({categoryId:s,vr:t,code:n,page:l="1"}){var g,w;const i=C();S().state.location.pathname.includes("page/1")&&l==="1"&&i({to:t=="fr"?`/news/fr/${s}`:`/news/${s}`});const{data:a,isLoading:h}=D(n,l),{data:d,isLoading:f}=A("7j",(t=="fr"?1:2).toString()),p=(a==null?void 0:a.posts)??[],o=(d==null?void 0:d.posts)??[],m=u.useRef(null);u.useEffect(()=>{const j=I.throttle(()=>{const c=m.current;window.innerWidth>1e3&&window.scrollY>c.clientHeight-window.innerHeight+50?(c.style.position="sticky",c.style.top=`-${c.clientHeight-window.innerHeight+50}px`):(c.style.position="",c.style.top="0px")},10);return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]);const k=H()?(g=E.get(s))==null?void 0:g.name:(w=M.get(s))==null?void 0:w.name,y=Math.ceil(((a==null?void 0:a.total)??20)/20),b=`/news${t=="fr"?"/fr":""}/${s}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:t=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-8",children:k}),e.jsx(R,{posts:p,vr:t,loading:h}),e.jsx(T,{isFr:t==="fr",paginationLinkBase:b,current:Number(l),total:y})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsxs("div",{ref:m,className:"space-y-7",children:[e.jsx(V,{}),e.jsx(W,{loading:f,posts:o.slice(0,10),full:!0,vr:t,hedding:t=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})]})})]})}const P=`<svg viewBox='0 0 36 36' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M18.25 32.6667C26.3502 32.6667 32.9167 26.1002 32.9167 18C32.9167 9.89983 26.3502 3.33334 18.25 3.33334C10.1498 3.33334 3.58333 9.89983 3.58333 18C3.58333 26.1002 10.1498 32.6667 18.25 32.6667Z' stroke='currentColor' stroke-width='2.93333' stroke-linecap='round' stroke-linejoin='round'/><path d='M18.25 9.20001V18L24.1167 20.9333' stroke='currentColor' stroke-width='2.93333' stroke-linecap='round' stroke-linejoin='round'/></svg>
`,le=({tabActive:s,onChangeTab:t,isFr:n})=>{const l=C(),i=n?"/news/fr/$postId":"/news/$postId",r=new Map([["1h","trending-lasthours"],["6h","trending-6hours"],["24h","trending"],["7 days","trending-7days"],["30 days","trending-30days"]]),a=new Map([["1 ساعة","trending-lasthours"],["6 ساعات","trending-6hours"],["24 ساعة","trending"],["7 أيام","trending-7days"],["30 يومًا","trending-30days"]]),h=n?r:a,d=n?Array.from(r.keys()):Array.from(a.keys()),f=n?"Dernières News":"آخر الأخبار",p=o=>{if(o==="last"){l({to:n?"/news/fr/$postId":"/news/$postId",params:{postId:n?"dernieres-actualites":"آخر-الأخبار"}});return}l({to:i,params:{postId:h.get(o)||"trending"}}),t&&t(o)};return e.jsx("div",{className:"section-tab-header relative mb-2 flex flex-col ",children:e.jsxs("div",{className:"flex grow flex-wrap gap-2",children:[s.fr==="last"?e.jsxs(N,{color:"lime",onClick:()=>p("last"),className:"cursor-pointer",children:[e.jsx("div",{className:"  h-4  xl:w-5 xl:h-5 ",style:{color:"#F502E4"},dangerouslySetInnerHTML:{__html:P}}),f]},"last"):e.jsxs(N,{outline:!0,onClick:()=>p("last"),className:"cursor-pointer",children:[e.jsx("div",{className:" h-4  xl:w-5 xl:h-5 ",style:{color:"#F502E4"},dangerouslySetInnerHTML:{__html:P}}),f]},"last"),d.map(o=>s[n?"fr":"ar"]===o?e.jsx(N,{color:"lime",onClick:()=>p(o),className:"cursor-pointer",children:o},o):e.jsx(N,{className:"cursor-pointer",onClick:()=>p(o),outline:!0,children:o},o))]})})};function de({categoryId:s,vr:t,code:n,page:l="1"}){var g,w;const i=C();S().state.location.pathname.includes("page/1")&&l==="1"&&i({to:t=="fr"?`/news/fr/${s}`:`/news/${s}`});const{data:a,isLoading:h}=J(t,l),{data:d,isLoading:f}=A("7j",(t=="fr"?1:2).toString()),p=(a==null?void 0:a.posts)??[],o=(d==null?void 0:d.posts)??[],m=u.useRef(null);u.useEffect(()=>{const j=I.throttle(()=>{const c=m.current;window.innerWidth>1e3&&window.scrollY>c.clientHeight-window.innerHeight+50?(c.style.position="sticky",c.style.top=`-${c.clientHeight-window.innerHeight+50}px`):(c.style.position="",c.style.top="0px")},10);return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]);const v=H(),k=v?(g=E.get(s))==null?void 0:g.name:(w=M.get(s))==null?void 0:w.name,y=Math.ceil(((a==null?void 0:a.total)??10)/10);console.log(y);const b=`/news${t=="fr"?"/fr":""}/${s}/page/`;return e.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:t=="fr"?"ltr":"rtl",children:[e.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6",children:k}),e.jsx(le,{isFr:v,tabActive:{fr:"last",ar:"last"}}),e.jsx(R,{posts:p,vr:t,loading:h}),e.jsx(T,{isFr:t==="fr",paginationLinkBase:b,current:Number(l),total:y})]}),e.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:e.jsxs("div",{ref:m,className:"space-y-7",children:[e.jsx(V,{},"last"),e.jsx(W,{loading:f,posts:o.slice(0,10),full:!0,vr:t,hedding:t=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})]})})]})}export{V as A,ce as C,de as L,le as S};
