import{j as s,a as p,e as D,l as y,S as P,r as u,u as k,T as C,V as W}from"./index-BMd-jbT0.js";import{u as T,L as E}from"./getLastByCategory-DGNLVUE5.js";import{a as H,_ as F,W as R,b as V}from"./NoInternet-eXLd3SC-.js";import{a as z,C as G,b as Y}from"./image-DES5a_om.js";function _({className:t,...e}){return s.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:p("mx-auto flex w-full justify-center",t),...e})}function B({className:t,...e}){return s.jsx("ul",{"data-slot":"pagination-content",className:p("flex flex-row items-center gap-1",t),...e})}function $({...t}){return s.jsx("li",{"data-slot":"pagination-item",...t})}function v({className:t,isActive:e,size:n="icon",...i}){return s.jsx(D,{"aria-current":e?"page":void 0,"data-slot":"pagination-link","data-active":e,className:p(Y({variant:e?"outline":"secondary",size:n}),t,e?"text-white bg-lime-600 hover:bg-lime-500 hover:text-white":"hover:bg-lime-500 hover:text-white"),...i})}function q({className:t,isFr:e,...n}){return s.jsx(v,{"aria-label":"Go to previous page",size:"default",className:p("gap-1 px-2.5 sm:pl-2.5",t),...n,children:e?s.jsx(z,{className:"size-4",strokeWidth:3}):s.jsx(G,{className:"size-4",strokeWidth:3})})}function A({className:t,isFr:e,...n}){return s.jsxs(v,{"aria-label":"Go to next page",size:"default",className:p("gap-1 px-2.5 sm:pr-2.5",t),...n,children:[e?s.jsx(G,{className:"size-4",strokeWidth:3}):s.jsx(z,{className:"size-4",strokeWidth:3})," "]})}const S=({paginationLinkBase:t,current:e,total:n,isFr:i=!0})=>{const a=J(Number(e),n);return s.jsx(_,{className:"mt-12",children:s.jsxs(B,{children:[s.jsx($,{children:s.jsx(q,{isFr:i,disabled:e==1,href:`${t}${Number(e)-1}`})}),a.map(r=>s.jsx($,{children:s.jsx(v,{href:`${t}${r}`,isActive:r==Number(e),children:r})},r)),s.jsx($,{children:s.jsx(A,{isFr:i,href:`${t}${e+1}`,disabled:Number(e)>=n})})]})})};function J(t,e){let n,i;return e<=5?(n=1,i=e):t<=2?(n=1,i=5):t>=e-1?(n=e-4,i=e):(n=t-2,i=t+2),Array.from({length:i-n+1},(a,r)=>n+r).map(a=>Math.ceil(a))}function X({categoryId:t,vr:e,code:n,page:i="1"}){var g,f;const a=y();P().state.location.pathname.includes("page/1")&&i==="1"&&a({to:e=="fr"?`/news/fr/${t}`:`/news/${t}`});const{data:l,isLoading:h}=T(n,i),{data:c,isLoading:w}=H("7j",(e=="fr"?1:2).toString()),j=(l==null?void 0:l.posts)??[],N=(c==null?void 0:c.posts)??[],d=u.useRef(null);u.useEffect(()=>{const m=F.throttle(()=>{const o=d.current;window.innerWidth>1e3&&window.scrollY>o.clientHeight-window.innerHeight+50?(o.style.position="sticky",o.style.top=`-${o.clientHeight-window.innerHeight+50}px`):(o.style.position="",o.style.top="0px")},10);return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const b=k()?(g=C.get(t))==null?void 0:g.name:(f=W.get(t))==null?void 0:f.name,x=Math.ceil(((l==null?void 0:l.total)??20)/20),L=`/news${e=="fr"?"/fr":""}/${t}/page/`;return s.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:e=="fr"?"ltr":"rtl",children:[s.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[s.jsx("h1",{className:"text-5xl font-bold mb-8",children:b}),s.jsx(E,{posts:j,vr:e,loading:h}),s.jsx(S,{isFr:e==="fr",paginationLinkBase:L,current:Number(i),total:x})]}),s.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:s.jsx("div",{ref:d,className:"space-y-7",children:s.jsx(R,{loading:w,posts:N.slice(0,10),full:!0,vr:e,hedding:e=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})})})]})}function Z({categoryId:t,vr:e,code:n,page:i="1"}){var g,f;const a=y();P().state.location.pathname.includes("page/1")&&i==="1"&&a({to:e=="fr"?`/news/fr/${t}`:`/news/${t}`});const{data:l,isLoading:h}=V(e,i),{data:c,isLoading:w}=H("7j",(e=="fr"?1:2).toString()),j=(l==null?void 0:l.posts)??[],N=(c==null?void 0:c.posts)??[],d=u.useRef(null);u.useEffect(()=>{const m=F.throttle(()=>{const o=d.current;window.innerWidth>1e3&&window.scrollY>o.clientHeight-window.innerHeight+50?(o.style.position="sticky",o.style.top=`-${o.clientHeight-window.innerHeight+50}px`):(o.style.position="",o.style.top="0px")},10);return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const b=k()?(g=C.get(t))==null?void 0:g.name:(f=W.get(t))==null?void 0:f.name,x=Math.ceil(((l==null?void 0:l.total)??10)/10);console.log(x);const L=`/news${e=="fr"?"/fr":""}/${t}/page/`;return s.jsxs("div",{className:"container my-12 flex flex-col lg:flex-row lg:pt-20",dir:e=="fr"?"ltr":"rtl",children:[s.jsxs("div",{className:"w-full lg:w-3/5 xl:w-2/3 xl:pe-20",children:[s.jsx("h1",{className:"text-5xl font-bold mb-8",children:b}),s.jsx(E,{posts:j,vr:e,loading:h}),s.jsx(S,{isFr:e==="fr",paginationLinkBase:L,current:Number(i),total:x})]}),s.jsx("div",{className:"mt-12 w-full lg:mt-0 lg:w-2/5 lg:ps-10 xl:w-1/3 xl:ps-0",children:s.jsx("div",{ref:d,className:"space-y-7",children:s.jsx(R,{loading:w,posts:N.slice(0,10),full:!0,vr:e,hedding:e=="fr"?"Les plus populaires cette semaine":"الأكثر رواجًا هذا الاسبوع"})})})]})}export{X as C,Z as L};
